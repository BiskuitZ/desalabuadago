<!DOCTYPE html>
<html lang="id" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Infografis Desa Labuadago</title>
  <link rel="icon" type="image/png" href="fotokkn/faviconkabposo.png" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    html {
      touch-action: manipulation;
      -webkit-text-size-adjust: 100%;
      -ms-text-size-adjust: 100%;
    }
    body {
      font-family: 'Inter', sans-serif;
      min-width: 320px;
      width: 100%;
      overflow-x: hidden;
      position: relative;
      -webkit-font-smoothing: antialiased;
      background-color: #f9fafb;
      color: #1f2937;
    }
    @media screen and (max-width: 640px) {
      * {
        -webkit-tap-highlight-color: transparent;
      }
      input, textarea {
        font-size: 16px !important;
      }
      body {
        touch-action: pan-y pinch-zoom;
        height: 100%;
        position: fixed;
        width: 100%;
      }
      #root {
        height: 100%;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        overscroll-behavior-y: contain;
      }
      .container {
        width: 100% !important;
        max-width: 100% !important;
        margin: 0 auto;
      }
    }
    body {
      overscroll-behavior-y: none;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 h-full">
  <div id="root" class="min-h-full">

 <!-- Header -->
  <header class="bg-red-800 sticky top-0 z-50">
    <div class="container mx-auto px-4 py-4">
      <div class="flex items-center justify-between">
        <!-- Logo and Title -->
        <div class="flex items-center gap-4">
          <img src="fotokkn/logokabposo.png" alt="Logo Kabupaten Poso" class="h-[64px] w-[45px] object-contain" />
          <div class="text-white">
            <h1 class="text-2xl md:text-3xl font-bold">Desa Labuadago</h1>
            <p class="text-base md:text-lg">Kabupaten Poso</p>
          </div>
        </div>

        <!-- Desktop Navigation -->
        <nav class="hidden md:flex items-center gap-3 text-white font-medium ml-8">
          <a href="index.html" class="hover:text-yellow-300 transition px-2 py-1 text-sm">Home</a>
          <a href="profildesa.html" class="hover:text-yellow-300 transition px-2 py-1 text-sm">Profil Desa</a>
          <a href="infografis.html" class="hover:text-yellow-300 border-b-2 border-yellow-300 transition px-2 py-1 text-sm">Infografis</a>
          <a href="listing.html" class="hover:text-yellow-300 transition px-2 py-1 text-sm">Listing</a>
          <a href="belanja.html" class="hover:text-yellow-300 transition px-2 py-1 text-sm">Belanja</a>
        </nav>

        <!-- Mobile Menu Button -->
        <button class="md:hidden text-white focus:outline-none" onclick="toggleMenu()">
          <i class="fas fa-bars text-2xl"></i>
        </button>
      </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-menu" class="fixed inset-0 bg-gradient-to-br from-red-900 to-red-800 bg-opacity-98 md:hidden transition-all duration-300 ease-in-out transform translate-x-full z-50 backdrop-blur-sm">
      <div class="flex flex-col h-full">
        <div class="flex justify-between items-center p-4 border-b border-white/20">
          <div class="text-white">
            <h2 class="text-xl font-bold">Menu</h2>
          </div>
          <button class="text-white focus:outline-none" onclick="toggleMenu()">
            <i class="fas fa-times text-2xl"></i>
          </button>
        </div>
        <nav class="flex-1 overflow-y-auto">
          <div class="flex flex-col gap-3 p-4">
            <a href="index.html" class="flex items-center space-x-3 hover:text-yellow-300 transition py-3 px-4 text-white text-lg rounded-lg hover:bg-white/10">
              <i class="fas fa-home w-6"></i>
              <span>Home</span>
            </a>
            <a href="profildesa.html" class="flex items-center space-x-3 hover:text-yellow-300 transition py-3 px-4 text-white text-lg rounded-lg hover:bg-white/10">
              <i class="fas fa-building w-6"></i>
              <span>Profil Desa</span>
            </a>
            <a href="infografis.html" class="flex items-center space-x-3 text-yellow-300 transition py-3 px-4 text-white text-lg rounded-lg bg-white/10">
              <i class="fas fa-chart-pie w-6"></i>
              <span>Infografis</span>
            </a>
            <a href="listing.html" class="flex items-center space-x-3 hover:text-yellow-300 transition py-3 px-4 text-white text-lg rounded-lg hover:bg-white/10">
              <i class="fas fa-list w-6"></i>
              <span>Listing</span>
            </a>
            <a href="belanja.html" class="flex items-center space-x-3 hover:text-yellow-300 transition py-3 px-4 text-white text-lg rounded-lg hover:bg-white/10">
              <i class="fas fa-shopping-cart w-6"></i>
              <span>Belanja</span>
            </a>
          </div>
        </nav>
      </div>
    </div>
  </header>

  <script>
    function toggleMenu() {
      const menu = document.getElementById('mobile-menu');
      menu.classList.toggle('translate-x-full');
    }

    function showLoading() {
      const overlay = document.getElementById('loading-overlay');
      overlay.classList.remove('hidden');
    }

    function hideLoading() {
      const overlay = document.getElementById('loading-overlay');
      overlay.classList.add('hidden');
    }

    document.addEventListener('DOMContentLoaded', function() {
      const links = document.querySelectorAll('a[href]');
      const navigationButtons = document.querySelectorAll('button:not(.category-btn)');
      
      // Handle navigation links
      links.forEach(link => {
        link.addEventListener('click', function(e) {
          if (this.href && this.href !== window.location.href && !this.href.includes('#') && !this.href.startsWith('javascript:')) {
            showLoading();
          }
        });
      });

      // Handle non-category buttons (like mobile menu)
      navigationButtons.forEach(button => {
        button.addEventListener('click', function(e) {
          showLoading();
          button.disabled = true;
        });
      });
    });

    window.addEventListener('pageshow', function(event) {
      if (event.persisted) {
        hideLoading();
      }
    });
  </script>

  <!-- Main Content: Infografis based on Administrasi Penduduk data from index.html -->
  <main class="container mx-auto px-6 py-12">
    <h2 class="text-3xl font-bold text-red-800 mb-8 text-center">Infografis Administrasi Penduduk</h2>
    <p class="text-center max-w-3xl mx-auto mb-12 text-gray-700">
      Berikut adalah data administrasi penduduk Desa Labuadago yang disajikan dalam bentuk infografis.
    </p>
    <!-- Category Navigation -->
    <div class="flex flex-wrap justify-center gap-4 mb-8">
      <button data-category="penduduk" class="category-btn bg-red-800 text-white px-6 py-3 rounded-lg font-medium hover:bg-red-700 transition-colors active:bg-red-900 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        <i class="fas fa-users mr-2"></i>
        Penduduk
      </button>
      <button data-category="sosial" class="category-btn bg-red-100 text-red-800 px-6 py-3 rounded-lg font-medium hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        <i class="fas fa-hands-helping mr-2"></i>
        Sosial
      </button>
      <button data-category="pertanian" class="category-btn bg-red-100 text-red-800 px-6 py-3 rounded-lg font-medium hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        <i class="fas fa-tractor mr-2"></i>
        Pertanian
      </button>
      <button data-category="industri" class="category-btn bg-red-100 text-red-800 px-6 py-3 rounded-lg font-medium hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        <i class="fas fa-industry mr-2"></i>
        Industri
      </button>
      <button data-category="perdagangan" class="category-btn bg-red-100 text-red-800 px-6 py-3 rounded-lg font-medium hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        <i class="fas fa-store mr-2"></i>
        Perdagangan
      </button>
      <button data-category="cuaca" class="category-btn bg-red-100 text-red-800 px-6 py-3 rounded-lg font-medium hover:bg-red-200 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2">
        <i class="fas fa-cloud-sun mr-2"></i>
        Cuaca
      </button>
    </div>

    <!-- Content Sections -->
    <div id="penduduk-content" class="content-section">
      <!-- Current penduduk content here -->
      <div class="bg-white rounded-lg shadow-lg p-6 mb-12 max-w-3xl mx-auto">
        <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Data Gender Penduduk</h3>
        <div class="w-full max-w-lg mx-auto">
          <canvas id="genderChart"></canvas>
        </div>
      </div>

      <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-4 gap-8 max-w-5xl mx-auto">
        <div class="bg-white rounded-lg shadow-lg p-6 text-center">
          <p class="text-4xl font-extrabold text-red-800">1.045</p>
          <p class="font-semibold text-gray-700">Penduduk</p>
        </div>
        <div class="bg-white rounded-lg shadow-lg p-6 text-center">
          <p class="text-4xl font-extrabold text-red-800">524</p>
          <p class="font-semibold text-gray-700">Laki-laki</p>
        </div>
        <div class="bg-white rounded-lg shadow-lg p-6 text-center">
          <p class="text-4xl font-extrabold text-red-800">521</p>
          <p class="font-semibold text-gray-700">Perempuan</p>
        </div>
        <div class="bg-white rounded-lg shadow-lg p-6 text-center">
          <p class="text-4xl font-extrabold text-red-800">285</p>
          <p class="font-semibold text-gray-700">Kepala Keluarga</p>
        </div>
      </div>
    </div>

      <div id="cuaca-content" class="content-section hidden">
        <div class="bg-white rounded-lg shadow-lg p-6 max-w-3xl mx-auto space-y-12">
          <div>
            <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Data Cuaca Desa Labuadago</h3>
            <div class="w-full max-w-lg mx-auto">
              <canvas id="weatherChart"></canvas>
            </div>
          </div>
          <div>
            <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Penyinaran Matahari Desa Labuadago</h3>
            <div class="w-full max-w-lg mx-auto">
              <canvas id="sunshineChart"></canvas>
            </div>
          </div>
        </div>
      </div>

    <div id="sosial-content" class="content-section hidden">
      <div class="bg-white rounded-lg shadow-lg p-6 mb-12 max-w-3xl mx-auto">
        <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Data Sosial</h3>
        <p class="text-center text-gray-600">Data sosial akan ditampilkan di sini</p>
      </div>
    </div>

    <div id="pertanian-content" class="content-section hidden">
      <div class="bg-white rounded-lg shadow-lg p-6 mb-12 max-w-3xl mx-auto">
        <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Data Pertanian</h3>
        <p class="text-center text-gray-600">Data pertanian akan ditampilkan di sini</p>
      </div>
    </div>

    <div id="industri-content" class="content-section hidden">
      <div class="bg-white rounded-lg shadow-lg p-6 mb-12 max-w-3xl mx-auto">
        <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Data Industri</h3>
        <p class="text-center text-gray-600">Data industri akan ditampilkan di sini</p>
      </div>
    </div>

    <div id="perdagangan-content" class="content-section hidden">
      <div class="bg-white rounded-lg shadow-lg p-6 mb-12 max-w-3xl mx-auto">
        <h3 class="text-xl font-bold text-red-800 mb-6 text-center">Data Perdagangan</h3>
        <p class="text-center text-gray-600">Data perdagangan akan ditampilkan di sini</p>
      </div>
    </div>


  </main>

  <!-- Footer -->
  <footer class="bg-red-800 py-8 text-center text-white">
    <div class="container mx-auto px-6 flex justify-center space-x-6 mb-4">
      <a href="#" aria-label="Facebook" class="text-white hover:text-yellow-300 transition text-2xl"><i class="fab fa-facebook"></i></a>
      <a href="#" aria-label="Twitter" class="text-white hover:text-yellow-300 transition text-2xl"><i class="fab fa-twitter"></i></a>
      <a href="#" aria-label="Instagram" class="text-white hover:text-yellow-300 transition text-2xl"><i class="fab fa-instagram"></i></a>
      <a href="#" aria-label="LinkedIn" class="text-white hover:text-yellow-300 transition text-2xl"><i class="fab fa-linkedin"></i></a>
    </div>
    <p class="text-white/80">&copy; 2025 Asindu Engineering Consultant. All rights reserved.</p>
  </footer>

  </div><!-- end of root div -->

  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Register ChartJS datalabels plugin
      Chart.register(ChartDataLabels);
      
      // Category switching functionality
      const categoryButtons = document.querySelectorAll('.category-btn');
      const contentSections = document.querySelectorAll('.content-section');

      function switchCategory(category) {
        // Update button styles
        categoryButtons.forEach(btn => {
          if (btn.dataset.category === category) {
            btn.classList.remove('bg-red-100', 'text-red-800');
            btn.classList.add('bg-red-800', 'text-white');
          } else {
            btn.classList.remove('bg-red-800', 'text-white');
            btn.classList.add('bg-red-100', 'text-red-800');
          }
        });

        // Show/hide content sections
        contentSections.forEach(section => {
          if (section.id === `${category}-content`) {
            section.classList.remove('hidden');
          } else {
            section.classList.add('hidden');
          }
        });
      }

      // Add click handlers to category buttons
      categoryButtons.forEach(btn => {
        btn.addEventListener('click', (e) => {
          e.preventDefault();
          e.stopPropagation(); // Prevent event bubbling
          
          const category = btn.dataset.category;
          
          // Update all buttons first
          categoryButtons.forEach(button => {
            if (button.dataset.category === category) {
              button.classList.remove('bg-red-100', 'text-red-800');
              button.classList.add('bg-red-800', 'text-white');
            } else {
              button.classList.remove('bg-red-800', 'text-white');
              button.classList.add('bg-red-100', 'text-red-800');
            }
          });
          
      // Then update content visibility and reinitialize chart if needed
      contentSections.forEach(section => {
        if (section.id === `${category}-content`) {
          section.classList.remove('hidden');
          if (category === 'penduduk') {
            // Reinitialize chart with animation
            setTimeout(() => {
              initGenderChart();
            }, 50); // Small delay to ensure DOM is ready
          } else if (category === 'cuaca') {
            // Initialize weather bar chart
            setTimeout(() => {
              initWeatherChart();
            }, 50);
          }
        } else {
          section.classList.add('hidden');
        }
      });
        });
      });

      // Initialize with Penduduk category active
      const defaultCategory = 'penduduk';
      const defaultButton = document.querySelector(`[data-category="${defaultCategory}"]`);
      if (defaultButton) {
        defaultButton.click();
      }

      // Initialize chart variable
      let genderChart = null;
      let weatherChart = null;

      // Function to create/update gender chart
      function initGenderChart() {
        // Destroy existing chart if it exists
        if (genderChart) {
          genderChart.destroy();
        }

        const ctx = document.getElementById('genderChart').getContext('2d');
        genderChart = new Chart(ctx, {
          type: 'pie',
          data: {
            labels: ['Laki-laki', 'Perempuan'],
            datasets: [{
              data: [524, 521],
              backgroundColor: [
                '#991b1b', // red-800
                '#ef4444'  // red-500
              ],
              borderColor: '#ffffff',
              borderWidth: 2
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            animation: {
              duration: 1000,
              easing: 'easeInOutQuart',
              animateRotate: true,
              animateScale: true
            },
            plugins: {
              legend: {
                position: 'bottom',
                labels: {
                  font: {
                    family: 'Inter',
                    size: 14
                  },
                  padding: 20
                }
              },
              datalabels: {
                color: '#ffffff',
                font: {
                  family: 'Inter',
                  size: 24,
                  weight: 'bold'
                },
                formatter: function(value, context) {
                  const total = context.dataset.data.reduce((acc, curr) => acc + curr, 0);
                  const percentage = ((value / total) * 100).toFixed(1);
                  return value + ' orang\n' + percentage + '%';
                },
                align: 'center',
                anchor: 'center',
                offset: 0,
                padding: 8,
                backgroundColor: 'rgba(0, 0, 0, 0.5)',
                borderRadius: 6,
                textShadow: '2px 2px 4px rgba(0, 0, 0, 0.5)'
              },
              tooltip: {
                callbacks: {
                  label: function(context) {
                    const label = context.label || '';
                    const value = context.raw || 0;
                    const total = context.dataset.data.reduce((acc, curr) => acc + curr, 0);
                    const percentage = ((value / total) * 100).toFixed(1);
                    return `${label}: ${value} orang (${percentage}%)`;
                  }
                }
              }
            }
          }
        });
      }

      // Function to create/update weather bar chart
      function initWeatherChart() {
        if (weatherChart) {
          weatherChart.destroy();
        }
        if (sunshineChart) {
          sunshineChart.destroy();
        }

        const ctx = document.getElementById('weatherChart').getContext('2d');
        weatherChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'],
            datasets: [{
              label: 'Suhu (°C)',
              data: [27.5, 27.1, 27.7, 27.7, 28.4, 27.2, 28.0, 28.0, 28.5, 28.6, 28.3, 28.1],
              backgroundColor: '#ef4444',
              borderColor: '#991b1b',
              borderWidth: 1,
              borderRadius: 4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            scales: {
              y: {
                beginAtZero: false,
                title: {
                  display: true,
                  text: 'Suhu (°C)',
                  font: {
                    family: 'Inter',
                    size: 14,
                    weight: 'bold'
                  }
                }
              },
              x: {
                title: {
                  display: true,
                  text: 'Bulan',
                  font: {
                    family: 'Inter',
                    size: 14,
                    weight: 'bold'
                  }
                }
              }
            },
            plugins: {
              legend: {
                display: true,
                position: 'top',
                labels: {
                  font: {
                    family: 'Inter',
                    size: 14
                  }
                }
              },
              tooltip: {
                enabled: true,
                callbacks: {
                  label: function(context) {
                    return context.parsed.y + ' °C';
                  }
                }
              }
            }
          }
        });

        const ctxSunshine = document.getElementById('sunshineChart').getContext('2d');
        sunshineChart = new Chart(ctxSunshine, {
          type: 'bar',
          data: {
            labels: ['Januari', 'Februari', 'Maret', 'April', 'Mei', 'Juni', 'Juli', 'Agustus', 'September', 'Oktober', 'November', 'Desember'],
            datasets: [{
              label: 'Penyinaran Matahari (%)',
              data: [45, 61, 50, 65, 64, 55, 69, 74, 85, 82, 72, 40],
              backgroundColor: '#facc15',
              borderColor: '#ca8a04',
              borderWidth: 1,
              borderRadius: 4
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            scales: {
              y: {
                beginAtZero: true,
                max: 100,
                title: {
                  display: true,
                  text: 'Penyinaran Matahari (%)',
                  font: {
                    family: 'Inter',
                    size: 14,
                    weight: 'bold'
                  }
                }
              },
              x: {
                title: {
                  display: true,
                  text: 'Bulan',
                  font: {
                    family: 'Inter',
                    size: 14,
                    weight: 'bold'
                  }
                }
              }
            },
            plugins: {
              legend: {
                display: true,
                position: 'top',
                labels: {
                  font: {
                    family: 'Inter',
                    size: 14
                  }
                }
              },
              tooltip: {
                enabled: true,
                callbacks: {
                  label: function(context) {
                    return context.parsed.y + ' %';
                  }
                }
              }
            }
          }
        });
      }
    });
  </script>
</body>
</html>
